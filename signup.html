<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Signup | QUEEN APP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Arial;
  background:#f4f6f8;
  margin:0;
}
.box{
  max-width:380px;
  margin:40px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
h2{text-align:center;margin-top:0}
input,select,button{
  width:100%;
  padding:12px;
  margin-top:10px;
  font-size:15px;
}
button{
  background:#0d6efd;
  color:#fff;
  border:none;
  border-radius:6px;
}
.link{
  text-align:center;
  margin-top:10px;
}
a{color:#0d6efd;text-decoration:none}
</style>
</head>

<body>

<div class="box">
  <h2>Create Account</h2>

  <input id="name" placeholder="Full Name">
  <input id="email" type="email" placeholder="Email">
  <input id="password" type="password" placeholder="Password">

  <select id="country">
    <option value="">Select Country</option>
    <option>Bangladesh</option>
    <option>India</option>
    <option>Pakistan</option>
    <option>Nepal</option>
    <option>USA</option>
  </select>

  <input id="dob" type="date">

  <select id="gender">
    <option value="">Select Gender</option>
    <option>Male</option>
    <option>Female</option>
    <option>Other</option>
  </select>

  <button onclick="signup()">Signup</button>

  <div class="link">
    Already have an account?
    <a href="login.html">Login</a>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { getFirestore, doc, setDoc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ðŸ”¥ FIREBASE CONFIG */
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "PROJECT.firebaseapp.com",
  projectId: "PROJECT_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

/* ðŸ”¢ AUTO 8 DIGIT ID */
function genID(){
  return Math.floor(10000000 + Math.random()*90000000);
}

/* ðŸ†• SIGNUP */
window.signup = ()=>{
  if(!name.value||!email.value||!password.value||!country.value||!dob.value||!gender.value){
    alert("Fill all fields");
    return;
  }

  createUserWithEmailAndPassword(auth,email.value,password.value)
  .then(async(res)=>{
    await setDoc(doc(db,"users",res.user.uid),{
      uid: res.user.uid,
      userId: genID(),
      name: name.value,
      email: email.value,
      country: country.value,
      dob: dob.value,
      gender: gender.value,
      role: "user",
      balance: 0,
      created: Date.now()
    });

    location.href="pages/home.html";
  })
  .catch(e=>alert(e.message));
};
</script>

</body>
</html>
