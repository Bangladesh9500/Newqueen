
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family:Arial;
  background:#f4f6f8;
}
.card{
  background:#fff;
  margin:10px;
  padding:10px;
  border-radius:8px;
}
.card img{
  width:100%;
  max-height:120px;
  object-fit:cover;
}
button{
  padding:6px 10px;
  margin:5px;
}
</style>
</head>

<body>

<h2 style="text-align:center">Admin Approval</h2>
<div id="list"></div>

<script type="module">
import { auth, db } from "../js/firebase.js";
import { onAuthStateChanged } from
"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
import { collection, getDocs, updateDoc, doc }
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

/* ADMIN UID (CHANGE THIS) */
const ADMIN_UID = "YOUR_ADMIN_UID";

/* CHECK ADMIN */
onAuthStateChanged(auth,(u)=>{
  if(!u || u.uid !== ADMIN_UID){
    alert("Access denied");
    location.href="../login.html";
  }
});

/* LOAD GAMES */
const list = document.getElementById("list");
const games = await getDocs(collection(db,"games"));

games.forEach(g=>{
  if(g.data().status==="pending"){
    list.innerHTML += `
      <div class="card">
        <img src="${g.data().image}">
        <h4>${g.data().name}</h4>
        <p>à§³${g.data().price}</p>
        <button onclick="approve('${g.id}')">Approve</button>
        <button onclick="reject('${g.id}')">Reject</button>
      </div>
    `;
  }
});

/* ACTIONS */
window.approve = async(id)=>{
  await updateDoc(doc(db,"games",id),{status:"approved"});
  location.reload();
}
window.reject = async(id)=>{
  await updateDoc(doc(db,"games",id),{status:"rejected"});
  location.reload();
}
</script>

</body>
</html>
